image: "parity/rust:gitlab-ci"

cache:
    key: "${CI_JOB_NAME}"
    paths:
        - ./target/
        - ./.cargo/

test:cargo:
    stage: test
    script:
    - ./scripts/init.sh
    - export PATH="${CI_PROJECT_DIR}/cargo/bin/:$PATH"
    - export RUST_BACKTRACE=1
    - ./scripts/build.sh
    - cargo test --all --verbose

